{"version":3,"file":"nmc_welcome_popup-admin-settings.mjs","sources":["../src/js/settings-admin.js"],"sourcesContent":["/**\n * @author Björn Schießle <bjoern@schiessle.org>\n *\n * @copyright Copyright (c) 2016, Bjoern Schiessle\n * @license AGPL-3.0\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your opinion) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nvar imgUrl;\nvar en = 'en_GB';\nvar de = 'de_DE';\n\n(function(OCA) {\n\tOCA.NMC_Welcome_Popup = OCA.NMC_Welcome_Popup || {};\n\n\t/**\n\t * @namespace OCA.NMC_Welcome_Popup.Admin\n\t */\n\tOCA.NMC_Welcome_Popup.Admin = {\n\t\tcurrentConfig: '1',\n\t\tslideIds: '1',\n\t\tnoSlides: '0',\n\t\tmaxSlides: '5',\n\n\t\t_getAppConfig: function (key) {\n\t\t\treturn $.ajax({\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: OC.linkToOCS('apps/provisioning_api/api/v1', 2) + 'config/apps' + '/nmc_welcome_popup/' + key + '?format=json'\n\t\t\t});\n\t\t},\n\t\tinit: function(callback) {\n\t\t\tthis._getAppConfig('slideIds').done(function (data){\n\t\t\t\tif (data.ocs.data.data !== '') {\n\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.slideIds = data.ocs.data.data;\n\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.currentConfig = OCA.NMC_Welcome_Popup.Admin.slideIds.split(',')[0];\n\t\t\t\t} else {\n\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.noSlides = '1';\n\t\t\t\t}\n\t\t\t\tcallback();\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Add a new slide\n\t\t * @returns {number} id of the slide\n\t\t */\n\t\taddSlide: function(callback) {\n\t\t\tvar slideIds = OCA.NMC_Welcome_Popup.Admin.slideIds.split(',');\n\t\t\tif (slideIds.length < OCA.NMC_Welcome_Popup.Admin.maxSlides) {\n\t\t\t\tvar nextId = 1;\n\t\t\t\tif (slideIds.indexOf('1') >= 0) {\n\t\t\t\t\tnextId = 2;\n\t\t\t\t\twhile ($.inArray('' + nextId, slideIds) >= 0) {\n\t\t\t\t\t\tnextId++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tOCP.AppConfig.setValue('nmc_welcome_popup', 'slideIds', OCA.NMC_Welcome_Popup.Admin.slideIds + ',' + nextId, {\n\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.slideIds += ',' + nextId;\n\t\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.noSlides = '0';\n\t\t\t\t\t\tcallback(nextId)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tremoveSlide: function(callback) {\n\t\t\tif (OCA.NMC_Welcome_Popup.Admin.noSlides === '0') {\n\t\t\t\tvar slideIds = OCA.NMC_Welcome_Popup.Admin.slideIds.split(',');\n\t\t\t\tif (slideIds.length >= 1) {\n\t\t\t\t\tvar index = slideIds.indexOf(this.currentConfig);\n\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\tslideIds.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t\tvar config = this.currentConfig;\n\t\t\t\t\t$.ajax({ url: OC.generateUrl('/apps/nmc_welcome_popup/ajax/slideSettings/' + this.currentConfig), type: 'DELETE'})\n\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\tOCP.AppConfig.setValue('nmc_welcome_popup', 'slideIds', slideIds.join(','), {\n\t\t\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\t\t\tif (slideIds.length > 0) {\n\t\t\t\t\t\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.slideIds = slideIds.join(',');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.noSlides = '1';\n\t\t\t\t\t\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.slideIds = '1';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcallback(config);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}\n})(OCA);\n\nfunction startLoading() {\n\tOC.msg.startSaving('#welcome_settings_msg');\n\t$('#welcome_settings_loading').show();\n}\n\nfunction startLoadingImg() {\n\t// OC.msg.startSaving('#welcome_img_loaded_msg');\n\tif ($('#welcome_img_loaded_msg').is(\":hidden\") == false) {\n\t\t$('#welcome_img_loaded_msg').hide();\n\t}\n\t$('#welcome_img_loading').show();\n}\n\n$(function() {\n\n\t// $('#welcome_popup [data-toggle=\"tooltip\"]').tooltip();\n\n\tvar addSlideBtn = $('.slide-list .add-slide');\n\tvar slideDataId = '.slide-list li[data-id=';\n\n\tif ($('#slide-image').val()) {\n\t\t$('#remove-img').show();\n\t} else {\n\t\t$('#remove-img').hide();\n\t}\n\n\tif(!imgUrl) {\n\t\timgUrl = $('#slide-image').data('imgurl');\n\t\t$('#slide-image').data('imgurl', '');\n\t}\n\n\t$('#remove-img').click(function (e) {\n\t\tvar image_name = $('#slide-image').val();\n\t\tvar slideId = $('.slide-list .active').data('id');\n\n\t\tstartLoadingImg();\n\t\t$.ajax({\n\t\t\ttype: \"DELETE\",\n\t\t\turl: OC.generateUrl('/apps/nmc_welcome_popup/image/' + image_name),\n\t\t\tdata: {'slideId' : slideId}\n\t\t}).done(function(response) {\n\t\t\tOC.msg.finishedSaving('#welcome_img_loaded_msg', response);\n\t\t\t$('#welcome_img_loading').hide();\n\t\t\t$(\"#slide-image\").val(\"\");\n\t\t\t$(\"#image-uploaded\").text(\"\");\n\t\t\t$('#remove-img').hide();\n\t\t}).fail(function(response) {\n\t\t\tOC.msg.finishedError('#welcome_img_loaded_msg', response.responseJSON.status);\n\t\t\t$('#welcome_img_loading').hide();\n\t\t});\n\t});\n\n\t$('.fileupload').fileupload({\n\t\tpasteZone: null,\n\t\tdropZone: null,\n\t\tdone: function (e, response) {\n\t\t\tvar $form = $(e.target).closest('form');\n\t\t\tvar key = $form.data('image-key');\n\n\t\t\t// OC.msg.finishedSaving('#welcome_img_loaded_msg', response.result);\n\t\t\t$form.find('label.button').addClass('icon-upload').removeClass('icon-loading-small');\n\t\t\t$('#welcome_img_loading').hide();\n\t\t\t$(\"#image-uploaded\").text(response.result.data.name);\n\t\t\t$(\"#slide-image\").val(response.result.data.image);\n\t\t\timgUrl = response.result.data.url;\n\t\t\t// $('#remove-img').show();\n\t\t},\n\t\tsubmit: function(e, response) {\n\t\t\tvar $form = $(e.target).closest('form');\n\t\t\tvar key = $form.data('image-key');\n\t\t\tstartLoadingImg();\n\t\t\t$form.find('label.button').removeClass('icon-upload').addClass('icon-loading-small');\n\t\t},\n\t\tfail: function (e, response){\n\t\t\tvar $form = $(e.target).closest('form');\n\t\t\tOC.msg.finishedError('#welcome_img_loaded_msg', response._response.jqXHR.responseJSON.data.message);\n\t\t\t$form.find('label.button').addClass('icon-upload').removeClass('icon-loading-small');\n\t\t\t$('#welcome_img_loading').hide();\n\t\t}\n\t});\n\t\n\t$('#add_new_popup').click(function() {\n\n\t\tvar slideId = $('.slide-list .active').data('id');\n\n\t\tstartLoading();\n\t\t$.post(\n\t\t\tOC.generateUrl('/apps/nmc_welcome_popup/ajax/slideSettings/' + slideId), getParams()\n\t\t).done(function(response) {\n\t\t\tOC.msg.finishedSaving('#welcome_settings_msg', response);\n\t\t\t$('#welcome_settings_loading').hide();\n\t\t\tif ($('#slide-image').val()) {\n\t\t\t\t$('#remove-img').show();\n\t\t\t}\n\t\t}).fail(function(response) {\n\t\t\tOC.msg.finishedError('#welcome_settings_msg', response.responseJSON.data.message);\n\t\t\t$('#welcome_settings_loading').hide();\n\t\t});\n\t});\n\n\t$('.show-preview').click(function(event) {\n\t\tvar lang = $(this).data('lang');\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t\tvar slide_params = getParams().slide;\n\t\tvar image_name = slide_params.image_uploaded;\n\t\tif (!image_name) {\n\t\t\timgUrl = \"\";\n\t\t} else if(!imgUrl) {\n\t\t\tvar cachebusterImg = Math.round(new Date().getTime() / 1000);\n\t\t\timgUrl = OC.generateUrl('/apps/nmc_welcome_popup/image/' + image_name) + '?v=' + cachebusterImg;\n\t\t}\n\t\tvar langSlide = slide_params[lang];\n\t\tlangSlide.image_url = imgUrl;\n\t\tconsole.log(langSlide);\n\t\tOCP.Loader.loadScript('nmc_welcome_popup', 'nmc_welcome_popup-main.mjs').then(function () {\n\t\t\twindow.OCA.NMC_Welcome_Popup.NcModal.previewSlide([langSlide]);\n\t\t});\n\t\treturn false;\n\t});\n\n\tfunction getParams() {\n\t\tvar en_title = $('#' + en + '-slide-title').val();\n\t\tvar en_primaryBtnLbl = $('#' + en + '-primary-button-label').val();\n\t\tvar en_primaryBtnUrl = $('#' + en + '-primary-button-url').val();\n\t\tvar en_secondaryBtnDesc = $('#' + en + '-secondary-button-desc').val();\n\t\tvar en_text = $('#' + en + '-text').val();\n\t\t\n\t\tvar de_title = $('#' + de + '-slide-title').val();\n\t\tvar de_primaryBtnLbl = $('#' + de + '-primary-button-label').val();\n\t\tvar de_primaryBtnUrl = $('#' + de + '-primary-button-url').val();\n\t\tvar de_secondaryBtnDesc = $('#' + de + '-secondary-button-desc').val();\n\t\tvar de_text = $('#' + de + '-text').val();\n\n\t\tvar image_name = $('#slide-image').val();\n\n\t\treturn {'slide': {'en_GB' : {'title' : en_title, 'primary_button_label' : en_primaryBtnLbl, 'primary_button_url' : en_primaryBtnUrl, 'secondary_button_desc' : en_secondaryBtnDesc, 'content': en_text}, 'de_DE' : {'title' : de_title, 'primary_button_label' : de_primaryBtnLbl, 'primary_button_url' : de_primaryBtnUrl, 'secondary_button_desc' : de_secondaryBtnDesc, 'content': de_text},'image_uploaded' : image_name}};\n\t}\n\n\tOCA.NMC_Welcome_Popup.Admin.init(function() {\n\t\t$(slideDataId + '\"' + OCA.NMC_Welcome_Popup.Admin.currentConfig + '\"]').addClass('active');\n\t});\n\n\tvar switchSlide = function(slideId) {\n\t\t$('.slide-list li').removeClass('active');\n\t\t$(slideDataId + '\"' + slideId + '\"]').addClass('active');\n\t\tif ($('#welcome_img_loaded_msg').is(\":hidden\") == false) {\n\t\t\t$('#welcome_img_loaded_msg').hide();\n\t\t}\n\t\tif ($('#welcome_settings_msg').is(\":hidden\") == false) {\n\t\t\t$('#welcome_settings_msg').hide();\n\t\t}\n\t\tOCA.NMC_Welcome_Popup.Admin.currentConfig = '' + slideId;\n\t\t$.get(OC.generateUrl('/apps/nmc_welcome_popup/ajax/slideSettings/' + slideId)).done(function(data) {\n\t\t\tif (Object.entries(data).length > 0) {\n\t\t\t\tObject.keys(data).forEach(function(form_section){\n\t\t\t\t\tif (form_section == en || form_section == de) {\n\t\t\t\t\t\tvar entries = data[form_section];\n\t\t\t\t\t\tObject.keys(entries).forEach(function (configKey) {\n\t\t\t\t\t\t\tvar element = $('#welcome_popup *[data-key=\"' + form_section + '_' + configKey + '\"]');\n\t\t\t\t\t\t\tif(element.is('input') && (element.prop('type') === 'text' || element.prop('type') === 'number' || element.prop('type') === 'url')) {\n\t\t\t\t\t\t\t\telement.val(entries[configKey])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(element.is('textarea')) {\n\t\t\t\t\t\t\t\telement.val(entries[configKey]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(element.prop('type') === 'checkbox') {\n\t\t\t\t\t\t\t\tvar value = entries[configKey] === '1' ? '1' : '0';\n\t\t\t\t\t\t\t\telement.val(value);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.log('unable to find element for ' + configKey);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (form_section == 'image_uploaded') {\n\t\t\t\t\t\t$(\"#slide-image\").val(data[form_section]);\n\t\t\t\t\t\tif ($('#slide-image').val()) {\n\t\t\t\t\t\t\t$('#remove-img').show();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$('#remove-img').hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (form_section == 'image_url') {\n\t\t\t\t\t\timgUrl = data[form_section];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar element = $('#welcome_popup *[data-key]');\n\t\t\t\telement.val(\"\");\n\t\t\t\t$(\"#slide-image\").val(\"\");\n\t\t\t\t$('#remove-img').hide();\n\t\t\t}\n\t\t\tvar imgName = $(\"#image-name\");\n\t\t\timgName.val(imgName.data('key') + '_' + slideId);\n\t\t\t$(\"#image-uploaded\").text(\"\");\n\t\t\t$('input:checkbox[value=\"1\"]').attr('checked', true);\n\t\t\t$('input:checkbox[value=\"0\"]').attr('checked', false);\n\t\t});\n\t};\n\n\taddSlideBtn.on('click', function() {\n\t\tOCA.NMC_Welcome_Popup.Admin.addSlide(function (nextId) {\n\t\t\tvar slideIds = OCA.NMC_Welcome_Popup.Admin.slideIds.split(',');\n\t\t\t$('<li data-id=\"' + nextId + '\"><a>Slide ' + slideIds.length + '</a></li>').insertBefore(addSlideBtn[0]);\n\t\t\tswitchSlide(nextId);\n\t\t\tif (slideIds.length >= OCA.NMC_Welcome_Popup.Admin.maxSlides) {\n\t\t\t\taddSlideBtn.hide();\n\t\t\t}\n\t\t});\n\t});\n\n\t$('.slide-list').on('click', 'li:not(.add-slide)', function() {\n\t\tvar slideId = '' + $(this).data('id');\n\t\tswitchSlide(slideId);\n\t});\n\n\t$('#remove_slide').on('click', function() {\n\t\tOCA.NMC_Welcome_Popup.Admin.removeSlide(function(currentConfig) {\n\t\t\tOC.msg.finishedSuccess('#remove_slide_msg', \"Slide removed\");\n\t\t\tvar slideIds = OCA.NMC_Welcome_Popup.Admin.slideIds.split(',');\n\t\t\tif (OCA.NMC_Welcome_Popup.Admin.noSlides === '0') {\n\t\t\t\t$(slideDataId + '\"' + currentConfig + '\"]').remove();\n\t\t\t\trenameSlides(slideIds);\n\t\t\t\tswitchSlide(slideIds[0]);\n\t\t\t} else {\n\t\t\t\t$(slideDataId + '\"' + currentConfig + '\"]').attr('data-id', slideIds[0]);\n\t\t\t\tswitchSlide(slideIds[0]);\n\t\t\t}\n\t\t\tif (addSlideBtn.is(\":hidden\")) {\n\t\t\t\taddSlideBtn.show();\n\t\t\t}\n\t\t});\n\t});\n\n\tfunction renameSlides(slideIds) {\n\t\tfor (id = 0; id < slideIds.length; id++) {\n\t\t\t$(slideDataId +'\"' + slideIds[id] + '\"] a').text(function(_,text){\n\t\t\t\treturn \"Slide \" + (id + 1);\n\t\t\t});\n\t\t}\n\t}\n\n});\n"],"names":["imgUrl","en","de","OCA","key","callback","data","slideIds","nextId","index","config","startLoading","startLoadingImg","addSlideBtn","slideDataId","e","image_name","slideId","response","$form","getParams","event","lang","slide_params","cachebusterImg","langSlide","en_title","en_primaryBtnLbl","en_primaryBtnUrl","en_secondaryBtnDesc","en_text","de_title","de_primaryBtnLbl","de_primaryBtnUrl","de_secondaryBtnDesc","de_text","switchSlide","form_section","entries","configKey","element","value","imgName","currentConfig","renameSlides","_","text"],"mappings":"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"}