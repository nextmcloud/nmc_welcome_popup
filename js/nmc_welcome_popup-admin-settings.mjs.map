{"version":3,"file":"nmc_welcome_popup-admin-settings.mjs","sources":["../src/js/settings-admin.js"],"sourcesContent":["/**\n * @author Björn Schießle <bjoern@schiessle.org>\n *\n * @copyright Copyright (c) 2016, Bjoern Schiessle\n * @license AGPL-3.0\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your opinion) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nvar imgUrl;\nvar en = 'en_GB';\nvar de = 'de_DE';\n\n(function(OCA) {\n\tOCA.NMC_Welcome_Popup = OCA.NMC_Welcome_Popup || {};\n\n\t/**\n\t * @namespace OCA.NMC_Welcome_Popup.Admin\n\t */\n\tOCA.NMC_Welcome_Popup.Admin = {\n\t\tcurrentConfig: '1',\n\t\tslideIds: '1',\n\t\tnoSlides: '0',\n\t\tmaxSlides: '5',\n\n\t\t_getAppConfig: function (key) {\n\t\t\treturn $.ajax({\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: OC.linkToOCS('apps/provisioning_api/api/v1', 2) + 'config/apps' + '/nmc_welcome_popup/' + key + '?format=json'\n\t\t\t});\n\t\t},\n\t\tinit: function(callback) {\n\t\t\tthis._getAppConfig('slideIds').done(function (data){\n\t\t\t\tif (data.ocs.data.data !== '') {\n\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.slideIds = data.ocs.data.data;\n\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.currentConfig = OCA.NMC_Welcome_Popup.Admin.slideIds.split(',')[0];\n\t\t\t\t} else {\n\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.noSlides = '1';\n\t\t\t\t}\n\t\t\t\tcallback();\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Add a new slide\n\t\t * @returns {number} id of the slide\n\t\t */\n\t\taddSlide: function(callback) {\n\t\t\tvar slideIds = OCA.NMC_Welcome_Popup.Admin.slideIds.split(',');\n\t\t\tif (slideIds.length < OCA.NMC_Welcome_Popup.Admin.maxSlides) {\n\t\t\t\tvar nextId = 1;\n\t\t\t\tif (slideIds.indexOf('1') >= 0) {\n\t\t\t\t\tnextId = 2;\n\t\t\t\t\twhile ($.inArray('' + nextId, slideIds) >= 0) {\n\t\t\t\t\t\tnextId++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tOCP.AppConfig.setValue('nmc_welcome_popup', 'slideIds', OCA.NMC_Welcome_Popup.Admin.slideIds + ',' + nextId, {\n\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.slideIds += ',' + nextId;\n\t\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.noSlides = '0';\n\t\t\t\t\t\tcallback(nextId)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tremoveSlide: function(callback) {\n\t\t\tif (OCA.NMC_Welcome_Popup.Admin.noSlides === '0') {\n\t\t\t\tvar slideIds = OCA.NMC_Welcome_Popup.Admin.slideIds.split(',');\n\t\t\t\tif (slideIds.length >= 1) {\n\t\t\t\t\tvar index = slideIds.indexOf(this.currentConfig);\n\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\tslideIds.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t\tvar config = this.currentConfig;\n\t\t\t\t\t$.ajax({ url: OC.generateUrl('/apps/nmc_welcome_popup/ajax/slideSettings/' + this.currentConfig), type: 'DELETE'})\n\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\tOCP.AppConfig.setValue('nmc_welcome_popup', 'slideIds', slideIds.join(','), {\n\t\t\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\t\t\tif (slideIds.length > 0) {\n\t\t\t\t\t\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.slideIds = slideIds.join(',');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.noSlides = '1';\n\t\t\t\t\t\t\t\t\t\tOCA.NMC_Welcome_Popup.Admin.slideIds = '1';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcallback(config);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}\n})(OCA);\n\nfunction startLoading() {\n\tOC.msg.startSaving('#welcome_settings_msg');\n\t$('#welcome_settings_loading').show();\n}\n\nfunction startLoadingImg() {\n\t// OC.msg.startSaving('#welcome_img_loaded_msg');\n\tif ($('#welcome_img_loaded_msg').is(\":hidden\") == false) {\n\t\t$('#welcome_img_loaded_msg').hide();\n\t}\n\t$('#welcome_img_loading').show();\n}\n\n$(function() {\n\n\t// $('#welcome_popup [data-toggle=\"tooltip\"]').tooltip();\n\n\tvar addSlideBtn = $('.slide-list .add-slide');\n\tvar slideDataId = '.slide-list li[data-id=';\n\n\tif ($('#slide-image').val()) {\n\t\t$('#remove-img').show();\n\t} else {\n\t\t$('#remove-img').hide();\n\t}\n\n\tif(!imgUrl) {\n\t\timgUrl = $('#slide-image').data('imgurl');\n\t\t$('#slide-image').data('imgurl', '');\n\t}\n\n\t$('#remove-img').click(function (e) {\n\t\tvar image_name = $('#slide-image').val();\n\t\tvar slideId = $('.slide-list .active').data('id');\n\n\t\tstartLoadingImg();\n\t\t$.ajax({\n\t\t\ttype: \"DELETE\",\n\t\t\turl: OC.generateUrl('/apps/nmc_welcome_popup/image/' + image_name),\n\t\t\tdata: {'slideId' : slideId}\n\t\t}).done(function(response) {\n\t\t\tOC.msg.finishedSaving('#welcome_img_loaded_msg', response);\n\t\t\t$('#welcome_img_loading').hide();\n\t\t\t$(\"#slide-image\").val(\"\");\n\t\t\t$(\"#image-uploaded\").text(\"\");\n\t\t\t$('#remove-img').hide();\n\t\t}).fail(function(response) {\n\t\t\tOC.msg.finishedError('#welcome_img_loaded_msg', response.responseJSON.status);\n\t\t\t$('#welcome_img_loading').hide();\n\t\t});\n\t});\n\n\t$('.fileupload').fileupload({\n\t\tpasteZone: null,\n\t\tdropZone: null,\n\t\tdone: function (e, response) {\n\t\t\tvar $form = $(e.target).closest('form');\n\t\t\tvar key = $form.data('image-key');\n\n\t\t\t// OC.msg.finishedSaving('#welcome_img_loaded_msg', response.result);\n\t\t\t$form.find('label.button').addClass('icon-upload').removeClass('icon-loading-small');\n\t\t\t$('#welcome_img_loading').hide();\n\t\t\t$(\"#image-uploaded\").text(response.result.data.name);\n\t\t\t$(\"#slide-image\").val(response.result.data.image);\n\t\t\timgUrl = response.result.data.url;\n\t\t\t// $('#remove-img').show();\n\t\t},\n\t\tsubmit: function(e, response) {\n\t\t\tvar $form = $(e.target).closest('form');\n\t\t\tvar key = $form.data('image-key');\n\t\t\tstartLoadingImg();\n\t\t\t$form.find('label.button').removeClass('icon-upload').addClass('icon-loading-small');\n\t\t},\n\t\tfail: function (e, response){\n\t\t\tvar $form = $(e.target).closest('form');\n\t\t\tOC.msg.finishedError('#welcome_img_loaded_msg', response._response.jqXHR.responseJSON.data.message);\n\t\t\t$form.find('label.button').addClass('icon-upload').removeClass('icon-loading-small');\n\t\t\t$('#welcome_img_loading').hide();\n\t\t}\n\t});\n\t\n\t$('#add_new_popup').click(function() {\n\n\t\tvar slideId = $('.slide-list .active').data('id');\n\n\t\tstartLoading();\n\t\t$.post(\n\t\t\tOC.generateUrl('/apps/nmc_welcome_popup/ajax/slideSettings/' + slideId), getParams()\n\t\t).done(function(response) {\n\t\t\tOC.msg.finishedSaving('#welcome_settings_msg', response);\n\t\t\t$('#welcome_settings_loading').hide();\n\t\t\tif ($('#slide-image').val()) {\n\t\t\t\t$('#remove-img').show();\n\t\t\t}\n\t\t}).fail(function(response) {\n\t\t\tOC.msg.finishedError('#welcome_settings_msg', response.responseJSON.data.message);\n\t\t\t$('#welcome_settings_loading').hide();\n\t\t});\n\t});\n\n\t$('.show-preview').click(function(event) {\n\t\tvar lang = $(this).data('lang');\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t\tvar slide_params = getParams().slide;\n\t\tvar image_name = slide_params.image_uploaded;\n\t\tif (!image_name) {\n\t\t\timgUrl = \"\";\n\t\t} else if(!imgUrl) {\n\t\t\tvar cachebusterImg = Math.round(new Date().getTime() / 1000);\n\t\t\timgUrl = OC.generateUrl('/apps/nmc_welcome_popup/image/' + image_name) + '?v=' + cachebusterImg;\n\t\t}\n\t\tvar langSlide = slide_params[lang];\n\t\tlangSlide.image_url = imgUrl;\n\t\tOCP.Loader.loadScript('nmc_welcome_popup', 'nmc_welcome_popup-main.mjs').then(function () {\n\t\t\twindow.OCA.NMC_Welcome_Popup.NcModal.previewSlide([langSlide]);\n\t\t});\n\t\treturn false;\n\t});\n\n\tfunction getParams() {\n\t\tvar en_title = $('#' + en + '-slide-title').val();\n\t\tvar en_primaryBtnLbl = $('#' + en + '-primary-button-label').val();\n\t\tvar en_primaryBtnUrl = $('#' + en + '-primary-button-url').val();\n\t\tvar en_secondaryBtnDesc = $('#' + en + '-secondary-button-desc').val();\n\t\tvar en_text = $('#' + en + '-text').val();\n\t\t\n\t\tvar de_title = $('#' + de + '-slide-title').val();\n\t\tvar de_primaryBtnLbl = $('#' + de + '-primary-button-label').val();\n\t\tvar de_primaryBtnUrl = $('#' + de + '-primary-button-url').val();\n\t\tvar de_secondaryBtnDesc = $('#' + de + '-secondary-button-desc').val();\n\t\tvar de_text = $('#' + de + '-text').val();\n\n\t\tvar image_name = $('#slide-image').val();\n\n\t\treturn {'slide': {'en_GB' : {'title' : en_title, 'primary_button_label' : en_primaryBtnLbl, 'primary_button_url' : en_primaryBtnUrl, 'secondary_button_desc' : en_secondaryBtnDesc, 'content': en_text}, 'de_DE' : {'title' : de_title, 'primary_button_label' : de_primaryBtnLbl, 'primary_button_url' : de_primaryBtnUrl, 'secondary_button_desc' : de_secondaryBtnDesc, 'content': de_text},'image_uploaded' : image_name}};\n\t}\n\n\tOCA.NMC_Welcome_Popup.Admin.init(function() {\n\t\t$(slideDataId + '\"' + OCA.NMC_Welcome_Popup.Admin.currentConfig + '\"]').addClass('active');\n\t});\n\n\tvar switchSlide = function(slideId) {\n\t\t$('.slide-list li').removeClass('active');\n\t\t$(slideDataId + '\"' + slideId + '\"]').addClass('active');\n\t\tif ($('#welcome_img_loaded_msg').is(\":hidden\") == false) {\n\t\t\t$('#welcome_img_loaded_msg').hide();\n\t\t}\n\t\tif ($('#welcome_settings_msg').is(\":hidden\") == false) {\n\t\t\t$('#welcome_settings_msg').hide();\n\t\t}\n\t\tOCA.NMC_Welcome_Popup.Admin.currentConfig = '' + slideId;\n\t\t$.get(OC.generateUrl('/apps/nmc_welcome_popup/ajax/slideSettings/' + slideId)).done(function(data) {\n\t\t\tif (Object.entries(data).length > 0) {\n\t\t\t\tObject.keys(data).forEach(function(form_section){\n\t\t\t\t\tif (form_section == en || form_section == de) {\n\t\t\t\t\t\tvar entries = data[form_section];\n\t\t\t\t\t\tObject.keys(entries).forEach(function (configKey) {\n\t\t\t\t\t\t\tvar element = $('#welcome_popup *[data-key=\"' + form_section + '_' + configKey + '\"]');\n\t\t\t\t\t\t\tif(element.is('input') && (element.prop('type') === 'text' || element.prop('type') === 'number' || element.prop('type') === 'url')) {\n\t\t\t\t\t\t\t\telement.val(entries[configKey])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(element.is('textarea')) {\n\t\t\t\t\t\t\t\telement.val(entries[configKey]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(element.prop('type') === 'checkbox') {\n\t\t\t\t\t\t\t\tvar value = entries[configKey] === '1' ? '1' : '0';\n\t\t\t\t\t\t\t\telement.val(value);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.log('unable to find element for ' + configKey);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (form_section == 'image_uploaded') {\n\t\t\t\t\t\t$(\"#slide-image\").val(data[form_section]);\n\t\t\t\t\t\tif ($('#slide-image').val()) {\n\t\t\t\t\t\t\t$('#remove-img').show();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$('#remove-img').hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (form_section == 'image_url') {\n\t\t\t\t\t\timgUrl = data[form_section];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar element = $('#welcome_popup *[data-key]');\n\t\t\t\telement.val(\"\");\n\t\t\t\t$(\"#slide-image\").val(\"\");\n\t\t\t\t$('#remove-img').hide();\n\t\t\t}\n\t\t\tvar imgName = $(\"#image-name\");\n\t\t\timgName.val(imgName.data('key') + '_' + slideId);\n\t\t\t$(\"#image-uploaded\").text(\"\");\n\t\t\t$('input:checkbox[value=\"1\"]').attr('checked', true);\n\t\t\t$('input:checkbox[value=\"0\"]').attr('checked', false);\n\t\t});\n\t};\n\n\taddSlideBtn.on('click', function() {\n\t\tOCA.NMC_Welcome_Popup.Admin.addSlide(function (nextId) {\n\t\t\tvar slideIds = OCA.NMC_Welcome_Popup.Admin.slideIds.split(',');\n\t\t\t$('<li data-id=\"' + nextId + '\"><a>Slide ' + slideIds.length + '</a></li>').insertBefore(addSlideBtn[0]);\n\t\t\tswitchSlide(nextId);\n\t\t\tif (slideIds.length >= OCA.NMC_Welcome_Popup.Admin.maxSlides) {\n\t\t\t\taddSlideBtn.hide();\n\t\t\t}\n\t\t});\n\t});\n\n\t$('.slide-list').on('click', 'li:not(.add-slide)', function() {\n\t\tvar slideId = '' + $(this).data('id');\n\t\tswitchSlide(slideId);\n\t});\n\n\t$('#remove_slide').on('click', function() {\n\t\tOCA.NMC_Welcome_Popup.Admin.removeSlide(function(currentConfig) {\n\t\t\tOC.msg.finishedSuccess('#remove_slide_msg', \"Slide removed\");\n\t\t\tvar slideIds = OCA.NMC_Welcome_Popup.Admin.slideIds.split(',');\n\t\t\tif (OCA.NMC_Welcome_Popup.Admin.noSlides === '0') {\n\t\t\t\t$(slideDataId + '\"' + currentConfig + '\"]').remove();\n\t\t\t\trenameSlides(slideIds);\n\t\t\t\tswitchSlide(slideIds[0]);\n\t\t\t} else {\n\t\t\t\t$(slideDataId + '\"' + currentConfig + '\"]').attr('data-id', slideIds[0]);\n\t\t\t\tswitchSlide(slideIds[0]);\n\t\t\t}\n\t\t\tif (addSlideBtn.is(\":hidden\")) {\n\t\t\t\taddSlideBtn.show();\n\t\t\t}\n\t\t});\n\t});\n\n\tfunction renameSlides(slideIds) {\n\t\tfor (id = 0; id < slideIds.length; id++) {\n\t\t\t$(slideDataId +'\"' + slideIds[id] + '\"] a').text(function(_,text){\n\t\t\t\treturn \"Slide \" + (id + 1);\n\t\t\t});\n\t\t}\n\t}\n\n});\n"],"names":["OCA","element"],"mappings":"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"}